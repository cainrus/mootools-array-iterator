(function(){var e={uid:Date.now(),getUniqueId:function(){return(this.uid++).toString(36)},Data:{},getData:function(a){return this.Data[a]},setData:function(a,b){return this.Data[a]=b}},g=new Class({Implements:[Options],options:{pit:true,limits:false,min:-1,max:-1},initialize:function(a,b){this.setOptions(b);var c=function(d){return d}.pass([e.getUniqueId()]);this.ref=function(){return this}.bind(a);this.jump=function(d){d=this.valid(d);return e.setData(c(),d)};this.key=function(){var d=c(),f=this.valid(e.getData(d));
return e.setData(d,f)}},valid:function(){var a=this.ref().length,b=arguments.length>0?Number.from(arguments[0]):this.key();if(b===null||a===0)return null;if(b<0)b=this.ref().length+b;if(b<0||b>a-1)return null;var c=this.options.min<0?null:this.options.min.limit(0,a);a=this.options.max<0?null:this.options.max.limit(0,a);if(c&&b<c||a&&b>a)return null;return b},reset:function(){var a=this.range();a=a.length?a[0]:null;return this.jump(a),this.current(a)},rewind:function(){return this.jump(null)},end:function(){var a=
this.range();a=a.length?a.pop():null;return this.jump(a),this.current(a)},next:function(){return this.slide(1)},prev:function(){return this.slide(-1)},current:function(a){a=a||this.key();return a===null?null:this.ref()[a]},slide:function(a){var b=this.range(),c=this.key();a=Number.from(a);var d=this.options.limits,f=this.options.pit;if(!b.length||a===null){this.jump(null);return null}if(a===0)return this.current();f&&b.unshift(null);c=f?c===null?0:b.indexOf(String.from(c)):a>0?c===null?(a--,0):b.indexOf(String.from(c)):
c===null?0:b.indexOf(String.from(c));if(!d&&a.abs()>=b.length)a%=b.length;c+=a;a=b.length-1;if(d){if(c>a)c=a;if(c<0)c=0}else{if(c>a)c=0+(c-a-1);if(c<0)c=a-(0-c-1)}c=b[c];this.jump(c);return Number.from(this.ref()[c])},range:function(){var a=this.ref(),b=a.length-1;if(b<0)return[];var c=this.options.min.limit(0,b);b=this.options.max.limit(0,b)||b;return Object.keys(a).slice(c,b+1)}});Array.implement({iterator:function(a){return new g(this,a)}})})();